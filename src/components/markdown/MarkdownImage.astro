---
import { Image } from "astro:assets";
import path from "path";

interface Props {
  src: ImageMetadata;
  alt: string;
  title?: string | undefined;
}

const { src, alt, title } = Astro.props;

const basename = path.basename(src.src);
const id = basename.split(".", 2)[0];
---

<figure id={id}>
  <Image
    src={src}
    alt={alt}
    title={title ?? alt}
    sizes="auto"
    widths={[
      300, 380, 570, 716, 760, 855, 950, 1074, 1140, 1432, 1611, 1790, 2148,
    ]}
  />
  <figcaption>{alt}</figcaption>
</figure>
