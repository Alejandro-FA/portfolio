---
import { Image } from "astro:assets";
import path from "path";

interface Props {
  src: ImageMetadata;
  alt: string;
  title?: string | undefined;
}

const { src, alt, title } = Astro.props;

const basename = path.basename(src.src);
const id = basename.split(".", 2)[0];
---

<figure id={id}>
  <Image
    src={src}
    alt={alt}
    title={title ?? alt}
    sizes="(min-width: 1520px) 714px, (min-width: 800px) calc(5.57vw + 630px), calc(96.67vw - 40px)"
    widths={[634, 930, 1428, 1770, 2048]}
  />
  <figcaption>{alt}</figcaption>
</figure>
